# Story 01.005: Implementar Comandos Básicos

**Status:** Review
**Owner:** scrum-master
**Last Updated:** 2025-10-22

---

## Story

**As a** founder,
**I want** que comandos básicos funcionem (/cf-status, /cf-help),
**so that** eu saiba o estado do sistema

*Owner: scrum-master | Editors: scrum-master*

---

## Acceptance Criteria

1. Comando `/cf-status` funcional: mostra se brain.md existe, total de posts gerados, último workflow executado, configurações ativas
2. Comando `/cf-help` funcional: lista comandos disponíveis, mostra exemplos de uso, sugere próximos passos baseado em estado
3. Comando `/cf-chamar-agente {id}` funcional: ativa agente específico, valida que agente existe, mostra erro claro se não existe
4. Logging básico funciona: logs salvos em `.foundry/logs/YYYY-MM-DD.log`, formato `{timestamp} [{comando}] {resultado}`, retention 30 dias
5. Mensagens de feedback claras

*Owner: scrum-master | Editors: scrum-master*

---

## Tasks / Subtasks

- [x] Criar script helper ou documento de comandos (AC: #1, #2, #3)
- [x] Implementar `/cf-status` (AC: #1)
- [x] Implementar `/cf-help` (AC: #2)
- [x] Implementar `/cf-chamar-agente` (AC: #3)
- [x] Configurar logging em `.foundry/logs/` (AC: #4)
- [x] Criar script de cleanup de logs antigos (AC: #4)
- [x] Testar cada comando (AC: #5)

*Owner: scrum-master | Editors: scrum-master, dev-agent*

---

## Dev Notes

Implementar comandos slash básicos para o founder interagir com o sistema: `/cf-status` (estado do projeto), `/cf-help` (ajuda), `/cf-chamar-agente` (ativar agente).

**Estimate:** 2 story points
**Dependencies:** STORY-004
**Priority:** P0
**Epic:** EPIC-01

### Testing Standards

- Seguir padrões de teste do projeto
- Testes devem cobrir todos critérios de aceite
- Documentar casos de teste em QA Results

*Owner: scrum-master | Editors: scrum-master*

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-21 | 1.0.0 | Story criada a partir de migração para formato BMad | scrum-master |
| 2025-10-22 | 1.1.0 | Comandos básicos implementados + logging + cleanup script | dev-agent |

*Owner: scrum-master | Editors: scrum-master, dev-agent, qa-agent*

---

## Dev Agent Record

### Agent Model Used

Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References

No debug log necessary - straightforward implementation following config-based architecture

### Completion Notes List

1. **3 Comandos Implementados**: cf-status, cf-help, cf-chamar-agente (documentação completa)
2. **Command Registry**: 12 comandos registrados (3 implemented, 9 planned)
3. **Sistema de Logging**: Documentação completa + formato ISO 8601 + retention 30 dias
4. **Cleanup Script**: Script bash funcional com dry-run, colors, estatísticas
5. **Testes Completos**: 8 testes executados, todos PASS
6. **Config-based**: Comandos são markdown (não código), seguindo arquitetura MVP

**Validação Executada:**
```
✅ 3 comandos documentados completamente
✅ Command registry com 12 comandos
✅ Sistema de logging funcionando (formato correto)
✅ Cleanup script testado (dry-run + execução real)
✅ Logs de teste criados e cleanup validado
✅ 8/8 testes PASS
```

**Decisões de Design:**
- Comandos são markdown (config-based architecture)
- Logging manual via echo + append (MVP simples)
- Cleanup script bash (compatível com macOS)
- Formato de log: {timestamp ISO8601} [{comando}] {resultado}
- Retention padrão: 30 dias
- Script com dry-run para segurança
- Cores ANSI para melhor UX

**Formato de Logging:**
```
2025-10-22T14:30:45-03:00 [INFO] [cf-status] Command executed successfully
2025-10-22T14:31:12-03:00 [INFO] [cf-help] Command executed - mode: full_list
2025-10-22T14:35:22-03:00 [INFO] [cf-chamar-agente] Agent requested: linkedin-writer
```

**Cleanup Script Testado:**
- Dry-run: detectou 2 logs antigos, não deletou ✅
- Execução real: deletou 2 logs, manteve 2 recentes, liberou 120B ✅
- Adicionou log entry da operação ✅
- Formatação com cores funcionando ✅

### File List

**Arquivos Criados:**

1. **content-foundry/.content-foundry/commands/cf-status.md** (documentação completa)
   - Mostra estado do sistema
   - 2 cenários: primeiro uso (brain vazio) e sistema em uso
   - Output formatado com seções: Cérebro Digital, Produção, Workflows, Configurações, Agentes, Sistema

2. **content-foundry/.content-foundry/commands/cf-help.md** (documentação completa)
   - Lista comandos disponíveis
   - 3 modos: lista completa, ajuda específica, comandos rápidos
   - Sugestões contextuais baseadas em estado

3. **content-foundry/.content-foundry/commands/cf-chamar-agente.md** (documentação completa)
   - Ativa agente específico
   - 4 cenários: agente ativo, planejado, não existe, brain vazio
   - Lista de 20 agentes por categoria

4. **content-foundry/.content-foundry/data/command-registry.yaml** (12 comandos)
   - Registro de comandos do sistema
   - Categorias: sistema (2), ajuda (1), workflow (2), agentes (2), validacao (2), debug (3)
   - Status: 3 implemented, 9 planned
   - Campos: id, nome, categoria, icone, descricao, uso, aliases, argumentos, arquivo, status, mvp

5. **content-foundry/.content-foundry/docs/logging-system.md** (400+ linhas)
   - Documentação completa do sistema de logging
   - Formato, níveis (DEBUG/INFO/WARN/ERROR), localização, retention
   - Como registrar logs, exemplos, análise, segurança
   - Configuração e troubleshooting

6. **content-foundry/.content-foundry/scripts/cleanup-logs.sh** (script executável)
   - Remove logs com mais de N dias
   - Retention padrão: 30 dias
   - Modos: execução normal, dry-run, help
   - Estatísticas: logs deletados, mantidos, espaço liberado
   - Cores ANSI para output
   - Compatível com macOS e Linux

7. **content-foundry/.content-foundry/tests/test-comandos-basicos.md** (documentação de testes)
   - 8 testes executados
   - Todos os testes PASS
   - Cobertura: 3 comandos, logging, cleanup, registry, mensagens, integração

**Diretórios Criados:**
- `.content-foundry/commands/` (comandos slash)
- `.content-foundry/scripts/` (scripts utilitários)

**Logs de Teste Criados:**
- `.foundry/logs/2025-10-22.log` (4 entries)

**Estatísticas:**
- Total de arquivos: 7
- Total de linhas: ~1500
- Comandos registrados: 12 (3 implemented, 9 planned)
- Testes executados: 8/8 PASS

*Owner: dev-agent | Editors: dev-agent*

---

## QA Results

*Results from QA Agent review will be documented here*

*Owner: qa-agent | Editors: qa-agent*
