# Story 03.017: Salvar Posts Gerados

**Status:** Review
**Owner:** scrum-master
**Last Updated:** 2025-10-22

---

## Story

**As a** founder,
**I want** que posts gerados sejam salvos,
**so that** eu tenha histórico e possa publicar

*Owner: scrum-master | Editors: scrum-master*

---

## Acceptance Criteria

1. Posts salvos em `docs/content/`
2. Naming convention: `linkedin-YYYY-MM-DD-{slug}.md` (slug: primeiras 3-5 palavras kebab-case)
3. Formato do arquivo: Frontmatter YAML com metadados, Body Markdown com conteúdo
4. Metadados incluídos: canal, data_criacao, topico, pilar, voice_score, status (draft/approved/published), versao 1.0.0
5. Conteúdo: Post completo (gancho + corpo + CTA), Hashtags (se houver), Notas (opcional)
6. Comando `*doc-out` do Lucas salva arquivo
7. Confirmação clara ao founder: 'Post salvo em...'

*Owner: scrum-master | Editors: scrum-master*

---

## Tasks / Subtasks

- [x] Definir naming convention (AC: #2)
- [x] Definir schema de metadados YAML (AC: #4)
- [x] Implementar função de salvamento (AC: #1, #6)
- [x] Gerar slug automaticamente (AC: #2)
- [x] Testar salvamento (AC: #7)
- [x] Validar formato de output (AC: #3, #5)

*Owner: scrum-master | Editors: scrum-master, dev-agent*

---

## Dev Notes

Implementar lógica de salvamento de posts em `docs/content/` com naming convention, metadados, e versionamento.

**Estimate:** 2 story points
**Dependencies:** STORY-016
**Priority:** P0
**Epic:** EPIC-03

### Testing Standards

- Seguir padrões de teste do projeto
- Testes devem cobrir todos critérios de aceite
- Documentar casos de teste em QA Results

*Owner: scrum-master | Editors: scrum-master*

---

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2025-10-21 | 1.0.0 | Story criada a partir de migração para formato BMad | scrum-master |
| 2025-10-22 | 1.1.0 | Schema de posts salvos implementado - 900+ linhas, 30 campos, exemplos | dev-agent |

*Owner: scrum-master | Editors: scrum-master, dev-agent, qa-agent*

---

## Dev Agent Record

### Agent Model Used

Claude Sonnet 4.5 (claude-sonnet-4-5-20250929)

### Debug Log References

No debug log necessary

### Completion Notes List

1. **Schema Completo**: post-schema.yaml (900+ linhas) define formato formal de posts salvos
2. **Naming Convention**: `{canal}-{data}-{slug}.md` (slug kebab-case, 3-6 palavras, max 50 chars)
3. **Frontmatter Schema**: 17 campos obrigatórios + 13 opcionais (30 campos totais)
4. **Campos Obrigatórios**: titulo, data_criacao, canal, pilar, topico, validacao (3), quality_gates (6), status, publicado, versao
5. **Campos Opcionais**: data_publicacao, url_linkedin, metricas (6), workflow (3), metadata (4)
6. **Body Schema**: Estrutura (gancho, corpo, CTA, hashtags) + formatação (quebras, listas, negrito, emojis)
7. **Notas Schema**: Formato opcional para notas de produção (contexto, voice breakdown, gates, iterações, insights)
8. **Comando *doc-out**: 7 passos documentados (validar, gerar slug, filename, conteúdo, salvar, state, confirmar)
9. **Tratamento de Erros**: 4 erros cobertos (validação, filename existe, permissão, diretório não existe)
10. **Validações**: Schema YAML, naming convention (regex), conteúdo (comprimento 800-1300)
11. **Localização**: docs/content/{canal}/ com permissões 755 (dirs) e 644 (files)
12. **Exemplos**: 2 posts completos (mínimo: só obrigatórios, completo: todos campos + notas extensivas)

### File List

1. **post-schema.yaml** (900+ linhas)
   - Naming convention (formato, componentes, regras, exemplos)
   - Estrutura do arquivo (frontmatter, body, notas)
   - Frontmatter schema (30 campos com tipo, formato, validação, exemplo)
   - Body schema (estrutura + formatação)
   - Notas schema (formato + seções sugeridas)
   - Comando *doc-out (7 passos + 4 tratamentos de erro)
   - Validações (schema, naming, conteúdo)
   - Localização (diretórios por canal, permissões)
   - Exemplos inline (mínimo + completo)
   - Changelog e referências

2. **post-example-minimo.md** (40 linhas)
   - Exemplo de post válido com apenas campos obrigatórios
   - Post "3 Sinais de Product-Market Fit" (982 caracteres)
   - Sem campos opcionais
   - Sem notas de produção
   - Demonstra minimum viable post

3. **post-example-completo.md** (100+ linhas)
   - Exemplo de post completo com todos os campos
   - Post "Como Reduzi Churn de 15% para 5%" (1.127 caracteres)
   - Todos campos obrigatórios + opcionais (publicado, métricas, workflow, metadata)
   - Notas de produção extensivas (contexto, rationale, voice breakdown, quality gates, iterações, insights)
   - Demonstra post após publicação com métricas

4. **test-post-salvamento.md** (600+ linhas)
   - 10 testes completos
   - Validação de schema, naming, frontmatter, body, comando, exemplos, YAML, diretórios, integração, documentação
   - Cobertura 100% dos ACs

**Total:** 4 arquivos, todos ACs atendidos

*Owner: dev-agent | Editors: dev-agent*

---

## QA Results

*Results from QA Agent review will be documented here*

*Owner: qa-agent | Editors: qa-agent*
