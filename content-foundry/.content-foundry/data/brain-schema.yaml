# Brain.md Schema v1.0.0
#
# Este schema define a estrutura formal do brain.md do founder.
# O brain.md usa formato híbrido: YAML frontmatter + Markdown body
#
# Versão: 1.0.0
# Última atualização: 2025-10-22
# Owner: elicitation-expert (Elena)

---
# YAML FRONTMATTER
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

metadata:
  versao: string                    # Formato: X.Y.Z (ex: "1.0.0")
  criado_em: datetime               # ISO8601 (ex: "2025-10-22T14:30:00Z")
  ultima_atualizacao: datetime      # ISO8601
  workflow: string                  # ID do workflow que criou (ex: "onboarding")
  total_historias: integer          # Número de histórias capturadas
  total_palavras: integer           # Contagem aproximada de palavras
  confidencialidade: string         # "PRIVADO" | "INTERNO" | "PÚBLICO"

founder:
  nome: string                      # Nome completo

  jornada_resumida: |               # Narrativa da jornada profissional (3-5 parágrafos)
    string (markdown)

  valores_core:                     # Lista de 3-5 valores fundamentais
    - valor: string                 # Nome do valor
      descricao: string             # Como se manifesta
      exemplo: string               # Situação real que demonstra o valor

  motivacao_conteudo:
    razao_profunda: |               # Por que cria conteúdo (não superficial)
      string (markdown)
    impacto_desejado: |             # O que quer causar na audiência
      string (markdown)

  percepcao_desejada:
    como_quer_ser_visto: |          # Identidade aspiracional mas realista
      string (markdown)
    o_que_evitar: |                 # Estereótipos a evitar
      string (markdown)

historias:                          # Lista de 5-10 histórias formativas
  - id: string                      # Identificador único (ex: "historia-01")
    tipo: enum                      # desafio | falha | conquista | influencia | perspectiva | origem
    titulo: string                  # Título curto e descritivo
    contexto: |                     # ANTES - Como as coisas estavam
      string (markdown)
    situacao: |                     # DURANTE - O que aconteceu
      string (markdown)
    resolucao: |                    # DEPOIS - Como resolveu ou o que mudou
      string (markdown)
    insight: |                      # O que aprendeu
      string (markdown)
    tags:                           # Lista de tags para categorização
      - string
    palavras_exatas:                # Frases/palavras que o founder usou
      - string

padroes_identificados:              # Padrões encontrados por Elena
  temas_recorrentes:                # Temas que aparecem em múltiplas histórias
    - tema: string
      aparece_em:                   # IDs das histórias
        - string (historia-id)

  valores_manifestados:             # Valores que aparecem nas histórias
    - valor: string                 # Nome do valor
      evidencia: string             # Trecho da história que demonstra

voz:
  tom:
    estilo: string                  # Descrição do estilo (ex: "direto, sem rodeios")
    nivel_formalidade: enum         # formal | semi-formal | casual | muito-casual
    personalidade: string           # Características (ex: "provocador, analítico")

  estrutura_preferida:
    tamanho_frases: enum            # curtas | medias | longas | misto
    tamanho_paragrafos: string      # Ex: "2-3 frases"
    usa_bullets: enum               # sempre | frequente | raramente | nunca
    usa_numeros: boolean            # true | false

  palavras_especificas:
    usa_sempre:                     # Palavras/expressões que o founder sempre usa
      - string
    nunca_usa:                      # Palavras que o founder evita
      - string

  exemplos:                         # Exemplos de textos que o founder gosta/não gosta
    - tipo: enum                    # gosta | nao_gosta
      texto: |                      # Exemplo real
        string (markdown)
      por_que: |                    # Análise do por que gosta/não gosta
        string (markdown)

safe_mode:
  topicos_evitar:                   # Tópicos que o founder não quer abordar
    - topico: string                # Nome do tópico (específico)
      razao: string                 # Por que evita
      nivel: enum                   # nunca | geralmente-evita
      alternativa: |                # O que fazer se aparecer
        string (markdown)

pilares:                            # 3-5 pilares de conteúdo
  - nome: string                    # Nome específico do pilar
    descricao: |                    # O que é
      string (markdown)
    experiencia: |                  # Por que tem autoridade (deve ser real)
      string (markdown)
    subtemas:                       # 3-5 subtemas dentro do pilar
      - string
    historias_relacionadas:         # IDs das histórias que dão base ao pilar
      - string (historia-id)

emocao_desejada:
  primaria: string                  # Emoção específica (não genérica)
  descricao: |                      # Como se manifesta
    string (markdown)

validacao:
  validacao_inicial:                # Resultado da validação inicial (Beatriz)
    data: datetime                  # ISO8601
    versao_brain: string            # Ex: "1.0.0"
    completude:
      status: enum                  # completo | incompleto
      secoes_vazias: []             # Lista de seções vazias
      secoes_genericas: []          # Lista de seções genéricas
    autenticidade:
      voice_fidelity: enum          # alta | media | baixa
      palavras_exatas_preservadas: enum  # sim | parcialmente | nao
      historias_completas: boolean  # true | false
      pilares_com_base: boolean     # true | false
    recomendacao:
      decisao: enum                 # aprovar | revisar_antes_de_usar
      proximos_passos: |
        string (markdown)

estatisticas:
  criacao:
    duracao_onboarding_minutos: integer
    perguntas_respondidas: integer
    revisoes: integer

  uso:
    conteudos_gerados: integer
    ultimo_uso: datetime            # ISO8601
    validacoes_realizadas: integer

---
# MARKDOWN BODY (OPCIONAL)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Seção opcional para notas adicionais que não cabem no YAML

## Notas de Atualização

Esta seção pode conter observações sobre atualizações do brain.md,
insights que surgiram após o onboarding, ou qualquer contexto adicional
que o founder queira documentar.

---
# VALIDAÇÃO DO SCHEMA
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Campos obrigatórios (não podem estar vazios):
required_fields:
  - metadata.versao
  - metadata.criado_em
  - metadata.ultima_atualizacao
  - founder.nome
  - founder.jornada_resumida
  - founder.valores_core (mínimo 3)
  - historias (mínimo 5)
  - voz.tom
  - voz.estrutura_preferida
  - safe_mode.topicos_evitar (mínimo 3)
  - pilares (mínimo 3)
  - emocao_desejada.primaria

# Validações de conteúdo:
validations:
  - name: "Mínimo de palavras"
    rule: "total_palavras >= 500"
    message: "Brain.md deve ter pelo menos 500 palavras"

  - name: "Mínimo de pilares"
    rule: "len(pilares) >= 3 and len(pilares) <= 5"
    message: "Deve ter entre 3 e 5 pilares"

  - name: "Mínimo de histórias"
    rule: "len(historias) >= 5"
    message: "Deve ter pelo menos 5 histórias"

  - name: "Pilares com base"
    rule: "all pilar has historias_relacionadas with len >= 1"
    message: "Cada pilar deve ter pelo menos 1 história relacionada"

  - name: "Exemplos de voz"
    rule: "len(voz.exemplos) >= 3"
    message: "Deve ter pelo menos 3 exemplos de voz"

  - name: "Safe mode específico"
    rule: "all safe_mode.topicos_evitar are specific (not generic)"
    message: "Tópicos de safe mode devem ser específicos"

  - name: "Voice validation threshold"
    rule: "validacao.autenticidade.voice_fidelity in ['alta', 'media']"
    message: "Voice fidelity deve ser alta ou média"

# Permissões recomendadas:
permissions:
  file_mode: "600"  # Apenas owner pode ler/escrever
  reason: "Brain.md contém informações privadas e sensíveis do founder"

# Backup automático:
backup:
  enabled: true
  location: ".content-foundry/backups/"
  naming_pattern: "brain-v{VERSION}-{TIMESTAMP}.md"
  retention_days: 90
  trigger: "on_update"

---
# NOTAS DE IMPLEMENTAÇÃO
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Este schema é usado por:
# - Elena (Elicitation Expert) para estruturar outputs das 3 fases
# - Beatriz (Voice Validator) para validar autenticidade
# - Writers para entender o founder antes de criar conteúdo
# - Brand Guardian para garantir consistência

# Formato híbrido (YAML + Markdown):
# - YAML frontmatter: Dados estruturados e processáveis
# - Markdown body: Notas adicionais e contexto narrativo

# Versionamento:
# - v1.0.0: Versão inicial após onboarding
# - v1.x.0: Atualizações incrementais (novos pilares, histórias)
# - v2.0.0: Revisão completa (mudança significativa de voz ou pilares)

# Confidencialidade:
# - Brain.md deve ser tratado como PRIVADO por padrão
# - NUNCA commitar brain.md real (usar .gitignore)
# - Apenas templates e exemplos fictícios podem ser compartilhados

---
# CHANGELOG DO SCHEMA
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# v1.0.0 - 2025-10-22 - dev-agent
# - Schema inicial criado
# - Estrutura baseada em brain-template.md (Story 02.006)
# - Validações definidas
# - Backup e permissions documentados
